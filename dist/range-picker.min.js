"use strict";angular.module("rgkevin.datetimeRangePicker",["vr.directives.slider"]).filter("rgTime",[function(){return function(a,e){var t=parseInt(a/60,10),i=10>a-60*t?"0"+(a-60*t):a-60*t,d=e?":00":t>=12&&24!==t?" pm":" am";return(!e&&t>12?24===t?"00":(10>t-12?"0":"")+(t-12):(10>t?"0":"")+t)+":"+i+d}}]).directive("rgRangePicker",["$compile","$timeout","$filter",function(a,e,t){return{restrict:"A",scope:{data:"=rgRangePicker",labels:"=",onTimeChange:"&",maxRangeDate:"=",vertical:"="},template:function(){return'<div class="rg-range-picker" ng-class="{\'rg-range-picker-vertical\':vertical}"><div class="rg-range-picker-box well" ng-class="{ \'only-calendars\': !data.hasTimeSliders, \'only-slider\': !data.hasDatePickers }"><div class="rg-range-picker-calendars" ng-show="data.hasDatePickers"><div class="rg-range-picker-calendar-box"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{datepickerTitles.from}}"></h5><datepicker ng-model="data.date.from" max-date="data.date.to" min-date="data.date.min" show-weeks="false" class="clean-calendar"></datepicker></div><div class="rg-range-picker-calendar-box right"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{datepickerTitles.to}}"></h5><datepicker ng-model="data.date.to" min-date="data.date.from" max-date="data.date.max" show-weeks="false" class="clean-calendar"></datepicker></div></div><div class="rg-range-picker-slider" id="rgRangePickerSliderContainer" ng-show="data.hasTimeSliders"><div class="rg-range-picker-slider-labels"><div class="row"><div class="rg-range-picker-divider xs-hidden"><span class="label">to</span></div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.from | rgTime:data.time.hours24}}</span></div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.to | rgTime:data.time.hours24}}</span></div></div></div></div></div></div>'},link:function(i,d,r){function n(){!f&&i.data.hasTimeSliders&&(g.append(p),a(p)(i),f=!0,d.width()<=m&&angular.element(".rg-range-picker",d[0]).addClass("rg-range-picker-responsive"))}function s(a,d){angular.isUndefined(c)||e.cancel(c),a!==d&&(c=e(function(){i.onTimeChange()({from:t("rgTime")(i.data.time.from,!0),to:t("rgTime")(i.data.time.to,!0),range:t("rgTime")(i.data.time.to-i.data.time.from,!0)})},500))}function l(){var a=i.data.date.to.getTime()-i.data.date.from.getTime(),e=k-a,t=i.data.date.from.getTime()-e<x?x:i.data.date.from.getTime()-e,d=i.data.date.to.getTime()+e>T?T:i.data.date.to.getTime()+e;i.data.date.min=new Date(t),i.data.date.max=new Date(d)}var c,m=400,g=angular.element("#rgRangePickerSliderContainer",d[0]),o='<div slider class="clean-slider" ng-model="data.time.from" ng-model-range="data.time.to" floor="{{data.time.dFrom}}" ceiling="{{data.time.dTo}}" buffer="{{data.time.minRange || 1}}" step="{{data.time.step || 1}}" step-width="{{data.time.step || 1}}" precision="0" stretch="3"></div>',p=angular.element(o),f=!1,u={date:{from:"START_DATE",to:"END_DATE"}},v={from:480,to:1020,dFrom:0,dTo:1440,step:15,minRange:15,hours24:!0},h={from:new Date,to:new Date,min:null,max:null};i.data.hasDatePickers=angular.isObject(i.data.date),i.data.hasTimeSliders=angular.isObject(i.data.time),i.datepickerTitles=angular.extend(u.date,i.labels&&i.labels.date),i.data.hasDatePickers&&(i.data.date=angular.extend(h,i.data.date)),i.data.hasTimeSliders&&(i.data.time=angular.extend(v,i.data.time)),r.collapse?i.$watch(function(){return d[0].className},function(){d.hasClass("in")&&n()}):n(),!angular.isUndefined(i.onTimeChange())&&i.data.hasTimeSliders&&(i.$watch("data.time.from",s),i.$watch("data.time.to",s));var k=864e5*(i.maxRangeDate&&i.maxRangeDate-1||0),T=i.data.date&&i.data.date.max&&i.data.date.max.getTime(),x=i.data.date&&i.data.date.min&&i.data.date.min.getTime();i.maxRangeDate&&i.data.hasDatePickers&&(i.$watch("data.date.from",l),i.$watch("data.date.to",l))},controller:function(){}}}]);
//# sourceMappingURL=range-picker.min.js.map
